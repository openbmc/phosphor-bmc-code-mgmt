{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "664b1ebd_8ca2b534",
        "filename": "static/obmc-flash-bmc-static-mount-alt.service.in",
        "patchSetId": 3
      },
      "lineNbr": 12,
      "author": {
        "id": 1000003
      },
      "writtenOn": "2022-02-21T21:47:48Z",
      "side": 1,
      "message": "If we make the mount directory name \"rofs-alt\" instead of \"alt-rofs\", then processBMCImage() would process this image automatically and seems to me we wouldn\u0027t need a new processSecondaryBMC() function since the version id would be calculate with the salt \"alt\" taken from the mount directory.",
      "range": {
        "startLine": 12,
        "startChar": 57,
        "endLine": 12,
        "endChar": 65
      },
      "revId": "d7907f598786054e23aaec48721488947c8c3512",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c331686_a05b8737",
        "filename": "static/obmc-flash-bmc-static-mount-alt.service.in",
        "patchSetId": 3
      },
      "lineNbr": 12,
      "author": {
        "id": 1000003
      },
      "writtenOn": "2022-02-21T22:01:11Z",
      "side": 1,
      "message": "To make this work with processBMCImage() , we\u0027ll need to mount the primary image too, it could be as rofs-bmc or whatever rofs-X name (no need to have a \"-functional\" suffix to specify which version is functional from the directory name). Once the priority is determined from the slot position then the functional association etc can be set.",
      "parentUuid": "664b1ebd_8ca2b534",
      "range": {
        "startLine": 12,
        "startChar": 57,
        "endLine": 12,
        "endChar": 65
      },
      "revId": "d7907f598786054e23aaec48721488947c8c3512",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0778bf63_07193511",
        "filename": "static/obmc-flash-bmc-static-mount-alt.service.in",
        "patchSetId": 3
      },
      "lineNbr": 12,
      "author": {
        "id": 1000044
      },
      "writtenOn": "2022-02-22T12:35:12Z",
      "side": 1,
      "message": "Good suggestion, I did not realize the processBMCImage() could process secondary image.\nI tried to use /run/media/rofs-alt, and it works as expected.\n\nBut it has a side effect that the processBMCImage() has the logic of:\n\n if (activations.size() \u003d\u003d 0)\n {\n     // create os-release symbol link in /run/media/rofs-xxx-functional\n }\n\nIn case the secondary image has a valid os-release, `activations.size()` is not 0, and thus the logic in the `if` is not run, and thus it does not create the functional activation.\n\nLet\u0027s see how to handle this case.",
      "parentUuid": "4c331686_a05b8737",
      "range": {
        "startLine": 12,
        "startChar": 57,
        "endLine": 12,
        "endChar": 65
      },
      "revId": "d7907f598786054e23aaec48721488947c8c3512",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3ea0551e_e97cbde8",
        "filename": "static/obmc-flash-bmc-static-mount-alt.service.in",
        "patchSetId": 3
      },
      "lineNbr": 12,
      "author": {
        "id": 1000003
      },
      "writtenOn": "2022-02-22T14:55:37Z",
      "side": 1,
      "message": "Right, we can mount both primary and secondary image in this mount service, one as rofs-bmc (or rofs-bmc-functional) for example and the other as rofs-alt. If functional depends on which slot is mounted, the mount name doesn\u0027t have to have -functional, we can set the functional info as part of determining slot location.",
      "parentUuid": "0778bf63_07193511",
      "range": {
        "startLine": 12,
        "startChar": 57,
        "endLine": 12,
        "endChar": 65
      },
      "revId": "d7907f598786054e23aaec48721488947c8c3512",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}